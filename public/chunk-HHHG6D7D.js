import{a as I}from"./chunk-OO3WAGFG.js";import{b as E}from"./chunk-UMWSO6KU.js";import"./chunk-LJ5XHLMQ.js";import{j as S}from"./chunk-H3MYTDDY.js";import{Ba as j,Fa as b,La as f,Oa as v,Pa as _,Qa as x,Ra as C,Sa as n,Ta as i,Va as A,W as h,Wa as u,X as g,Xa as c,Ya as o,Za as P,_a as l,sa as r,xa as d}from"./chunk-WRNNQS3D.js";import{h as m}from"./chunk-FK42CRUA.js";function T(s,e){if(s&1){let t=A();n(0,"button",8),u("click",function(){let p=h(t).$implicit,M=c();return g(M.seleccionarLetra(p))}),o(1),i()}if(s&2){let t=e.$implicit,a=c();f("disabled",a.estaDeshabilitada(t)),r(),l(" ",t," ")}}function y(s,e){if(s&1&&(n(0,"div",5)(1,"strong"),o(2),i()()),s&2){let t=c();r(2),P(t.mensajeFinal)}}var O=class s{constructor(e,t){this._authService=e;this._puntajeService=t;this.iniciarJuego()}palabras=["ANGULAR","FIREBASE","SERVICIO","COMPONENTE","IONIC"];palabraOculta="";letrasAdivinadas=[];letrasErroneas=[];letrasDisponibles="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");intentosRestantes=6;mensajeFinal="";juegoTerminado=!1;puntajeActual=0;mejorPuntaje=0;iniciarJuego(){let e=Math.floor(Math.random()*this.palabras.length),t=localStorage.getItem("mejorPuntaje");this.mejorPuntaje=t?+t:0,this.palabraOculta=this.palabras[e],this.letrasAdivinadas=[],this.intentosRestantes=6,this.mensajeFinal="",this.juegoTerminado=!1}seleccionarLetra(e){this.juegoTerminado||this.letrasAdivinadas.includes(e)||(this.letrasAdivinadas.push(e),this.palabraOculta.includes(e)||this.intentosRestantes--,this.verificarEstado())}verificarEstado(){this.obtenerPalabraConGuiones().includes("_")?this.intentosRestantes===0&&(this.mensajeFinal=`Perdiste. La palabra era "${this.palabraOculta}"`,this.juegoTerminado=!0,this.puntajeActual=0,this.guardarPuntaje()):(this.mensajeFinal="\xA1Ganaste!",this.juegoTerminado=!0,this.puntajeActual+=this.intentosRestantes,this.guardarPuntaje()),this.juegoTerminado&&this.puntajeActual>this.mejorPuntaje&&(this.mejorPuntaje=this.puntajeActual,localStorage.setItem("mejorPuntaje",this.mejorPuntaje.toString()))}guardarPuntaje(){return m(this,null,function*(){let e=yield this._authService.getUserId(),t=yield this._puntajeService.saveResult(e,"ahorcado",this.puntajeActual);t?console.error("Error al guardar en Supabase:",t):console.log("Resultado guardado")})}obtenerPalabraConGuiones(){return this.palabraOculta.split("").map(e=>this.letrasAdivinadas.includes(e)?e:"_").join(" ")}estaDeshabilitada(e){return this.letrasAdivinadas.includes(e)||this.juegoTerminado}esErronea(e){return this.letrasErroneas.includes(e)&&!this.palabraOculta.includes(e)}static \u0275fac=function(t){return new(t||s)(d(E),d(I))};static \u0275cmp=j({type:s,selectors:[["app-ahorcado"]],decls:17,vars:5,consts:[[1,"ahorcado-container"],[1,"palabra"],[1,"intentos"],[1,"teclado"],[1,"border","border-gray-600","disabled:bg-gray-600","disabled:text-white",3,"disabled"],[1,"mensaje"],[1,"puntaje"],[1,"bg-blue-400","p-4","rounded-2xl","cursor-pointer",3,"click"],[1,"border","border-gray-600","disabled:bg-gray-600","disabled:text-white",3,"click","disabled"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"h1"),o(2,"Juego del Ahorcado"),i(),n(3,"div",1),o(4),i(),n(5,"div",2),o(6),i(),n(7,"div",3),x(8,T,2,2,"button",4,_),i(),b(10,y,3,1,"div",5),n(11,"div",6),o(12),i(),n(13,"div",6),o(14),i(),n(15,"button",7),u("click",function(){return a.iniciarJuego()}),o(16," Reiniciar juego "),i()()),t&2&&(r(4),l(" ",a.obtenerPalabraConGuiones()," "),r(2),l("Intentos restantes: ",a.intentosRestantes,""),r(2),C(a.letrasDisponibles),r(2),v(a.mensajeFinal?10:-1),r(2),l("Mejor puntaje: ",a.mejorPuntaje,""),r(2),l("Puntaje Actual: ",a.puntajeActual,""))},dependencies:[S],styles:[".ahorcado-container[_ngcontent-%COMP%]{text-align:center;font-family:sans-serif;padding:20px}.palabra[_ngcontent-%COMP%]{font-size:2rem;letter-spacing:10px;margin-bottom:20px}.intentos[_ngcontent-%COMP%]{margin:10px 0;font-weight:700}.teclado[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:5px;margin-bottom:20px}.teclado[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1rem;cursor:pointer}.mensaje[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:10px}"]})};export{O as AhorcadoComponent};
