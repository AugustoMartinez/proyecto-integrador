import{o as b}from"./chunk-W7JGNRDW.js";import{a as k}from"./chunk-OO3WAGFG.js";import{b as S}from"./chunk-UMWSO6KU.js";import"./chunk-LJ5XHLMQ.js";import{h as M,j as y}from"./chunk-H3MYTDDY.js";import{Ba as C,Fa as c,La as m,Sa as r,Ta as i,Va as v,W as x,Wa as l,X as h,Xa as u,Ya as o,Za as f,_a as g,sa as s,xa as d}from"./chunk-WRNNQS3D.js";import{h as _}from"./chunk-FK42CRUA.js";function j(a,t){if(a&1&&(r(0,"p"),o(1," Siguiente carta: "),r(2,"strong"),o(3),i()()),a&2){let e=u();s(3),f(e.nextCard)}}function P(a,t){if(a&1&&(r(0,"p"),o(1),i()),a&2){let e=u();s(),g("\xA1Perdiste! Tu puntaje fue ",e.score,".")}}function E(a,t){if(a&1){let e=v();r(0,"button",3),l("click",function(){x(e);let p=u();return h(p.resetGame())}),o(1,"Reiniciar"),i()}}var I=class a{constructor(t,e){this._authService=t;this._puntajeService=e;this.resetGame()}deck=[];currentCard=0;nextCard=null;score=0;gameOver=!1;shuffleDeck(){let t=Array.from({length:13},(e,n)=>n+1);for(let e=t.length-1;e>0;e--){let n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}guess(t){if(this.deck.length===0||this.gameOver)return;this.nextCard=this.deck.pop(),t==="mayor"&&this.nextCard>this.currentCard||t==="menor"&&this.nextCard<this.currentCard?(this.score++,this.currentCard=this.nextCard,this.nextCard=null):(this.guardarPuntaje(),this.gameOver=!0)}resetGame(){this.deck=this.shuffleDeck(),this.currentCard=this.deck.pop(),this.nextCard=null,this.score=0,this.gameOver=!1}guardarPuntaje(){return _(this,null,function*(){let t=yield this._authService.getUserId(),e=yield this._puntajeService.saveResult(t,"mayor-menor",this.score);e?console.error("Error al guardar en Supabase:",e):console.log("Resultado guardado")})}static \u0275fac=function(e){return new(e||a)(d(S),d(k))};static \u0275cmp=C({type:a,selectors:[["app-mayor-menor"]],decls:19,vars:5,consts:[[1,"game-container"],[1,"card"],[1,"buttons"],[3,"click"],[1,"info"],[4,"ngIf"],[3,"click",4,"ngIf"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"h1"),o(2,"Juego: \xBFMayor o Menor?"),i(),r(3,"div",1)(4,"p"),o(5," Carta actual: "),r(6,"strong"),o(7),i()()(),r(8,"div",2)(9,"button",3),l("click",function(){return n.guess("mayor")}),o(10,"Mayor"),i(),r(11,"button",3),l("click",function(){return n.guess("menor")}),o(12,"Menor"),i()(),r(13,"div",4),c(14,j,4,1,"p",5),r(15,"p"),o(16),i(),c(17,P,2,1,"p",5),i(),c(18,E,2,0,"button",6),i()),e&2&&(s(7),f(n.currentCard),s(7),m("ngIf",n.nextCard!==null),s(2),g("Puntaje: ",n.score,""),s(),m("ngIf",n.gameOver),s(),m("ngIf",n.gameOver))},dependencies:[y,M,b],styles:[".game-container[_ngcontent-%COMP%]{text-align:center;padding:20px}.card[_ngcontent-%COMP%]{font-size:24px;margin:20px 0}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:10px 20px;font-size:18px}.info[_ngcontent-%COMP%]{margin-top:20px;font-size:18px}"]})};export{I as MayorMenorComponent};
